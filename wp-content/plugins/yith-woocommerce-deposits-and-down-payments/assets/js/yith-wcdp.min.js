jQuery(document).ready(function(a){var l=a('input[name="payment_type"]'),f=a(".yith-wcdp-deposit-shipping"),q=f.find(".yith-wcdp-shipping-form"),r=function(){l.length?l.on("change",function(){var d=a(this),e=d.val();d.is(":checked")&&("deposit"==e?f.slideDown():f.slideUp())}).change():f.length&&f.slideDown()};a("form.cart").on("found_variation",function(d,e){var b=a(this),m=b.find(".single_variation_wrap").last(),c=b.find(".yith-wcdp-single-add-to-cart-fields"),h=c.find(".full-price"),n=c.find(".deposit-price"),
    v=c.data("deposit-type"),k=c.data("deposit-amount"),p=c.data("deposit-rate"),t=c.data("price-template"),g=0,u="";g=0;g="";"undefined"!=typeof e.add_deposit_to_cart?(c.length&&c.parent().remove(),m.before(e.add_deposit_to_cart)):c.length&&(g=e.display_price.toFixed(2),u="( "+t.replace("0",g)+" )",g="amount"==v?Math.min(g,k).toFixed(2):Math.min(g,g*p/100).toFixed(2),g="( "+t.replace("0",g)+" )",h.html(u),n.html(g));f=b.find(".yith-wcdp-deposit-shipping");l=a('input[name="payment_type"]');f.length&&
(r(),a.ajax({beforeSend:function(){f.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){f.unblock()},data:{product_id:e.variation_id,qty:b.find('input[name="quantity"]').val(),action:yith_wcdp.actions.calculate_shipping},dataType:"json",method:"post",success:function(a){q.find("table").html(a.template)},url:yith_wcdp.ajax_url}))}).on("reset_data",function(){var d=a("#yith-wcdp-add-deposit-to-cart");d.parents(".variations_form").length&&yith_wcdp.variations_handling&&
d.remove()}).on("click",'#yith-wcdp-add-deposit-to-cart button[name="calc_shipping"]',function(d){d.preventDefault();var e=a(this);d=a("form.cart");var b=d.find('button[name="add-to-cart"]').val(),m=d.find('input[name="variation_id"]').val(),c=e.closest(".shipping-calculator-form");e=c.find("#calc_shipping_country").val();var h=c.find("#calc_shipping_city").val(),n=c.find("#calc_shipping_state").val();c=c.find("#calc_shipping_postcode").val();b||m||(b=d.find('input[name="add-to-cart"]').val());b&&
a.ajax({beforeSend:function(){f.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){f.unblock()},data:{action:yith_wcdp.actions.change_location,product_id:m?m:b,qty:d.find('input[name="quantity"]').val(),calc_shipping_country:e,calc_shipping_city:h,calc_shipping_state:n,calc_shipping_postcode:c},dataType:"json",method:"post",success:function(b){a(".shipping-calculator-form").slideUp("slow");q.find("table").html(b.template);"undefined"!=typeof b.notices&&(f.prepend(a("<div>").addClass("yith-wcdp-messages").html(b.notices)).slideDown(),
        window.setTimeout(function(){a(".yith-wcdp-messages").slideUp("slow",function(){a(this).remove()})},3E3))},url:yith_wcdp.ajax_url})}).find("select:eq(0)").change();a(document).on("yith_wcevti_price_refreshed yith_wapo_product_price_updated yith_wcp_price_updated",function(d,e){var b=a(".yith-wcdp-single-add-to-cart-fields"),f=b.find(".full-price"),c=b.find(".deposit-price"),h=b.data("deposit-type"),n=b.data("deposit-amount"),l=b.data("deposit-rate"),k=b.data("price-template"),p=a(".ywcp_wcp_group_total");
    !b.length||1==p.length&&"yith_wapo_product_price_updated"==d.type||(b="( "+k.replace("0",e)+" )",h="amount"==h?Math.min(e,n).toFixed(2):Math.min(e,e*l/100).toFixed(2),k="( "+k.replace("0",h)+" )",f.html(b),c.html(k))});(function(){a(".shipping-calculator-form").hide();r();a(document).on("click",".shipping-calculator-button",function(){a(".shipping-calculator-form").slideToggle("slow",function(){a("body").trigger("country_to_state_changed")});return!1})})()});